parameters:
  docker:
    type: string
    default: 'circleci/openjdk:8' 
    description: "Docker image to use for build"
  file-spec:
    type: string
    default: ''
    description: "Optional: Path to a File Spec containing additional configuration"
  build-steps:
    type: steps
    default: []
    description: "Steps to generate artifacts. Alternately provide `workspace-path`"
  workspace-path:
    type: string
    default: ''
    description: "The key of a workflow workspace which contains artifact. Alternately provide `build-steps`"
  source:
    type: string
    description: "The local pattern of files to upload"
  target:
    type: string
    description: "The remote path in artifactory, using pattern [repository_name]/[repository_path]"
docker: 
  - image: <<parameters.docker>>
steps:
  - checkout
  - when:
      condition: <<parameters.build-steps>> 
      steps: << parameters.build-steps >>
  - when:
      condition: <<parameters.workspace-path>> 
      steps: 
        - attach_workspace:
            at: <<parameters.workspace-path>> 
  - install
  - configure
  - upload:
      source: <<parameters.source>>
      target: <<parameters.target>>
      file-spec: <<parameters.file-spec>> 

